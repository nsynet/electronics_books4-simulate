//==声明区==============================================================================================
#include	<reg51.h>  	               // 定义8051暂存器之标头档,P2-17~19 
#define	LED	P2			      // 定义LED接至P2
 delay(int);		                        // 声明延迟函数 
//===========================主程序====================================================================
main()					           //主程序开始 
{	int  i;       	           //声明整形数据i
	LED=0xfe;			      //初值=1111 1110,只有最右1灯亮	
	while(1)			      //无穷循环,程序一直跑 
	{	for(i=0;i<7;i++)             //左移7次 
		   { delay(500);	           //延迟0.5s 
			LED=(LED<<1)|0x01;	  //左移1位,并设定最低位元为1 
		    }				       //左移结束,只有最左1灯亮 
		for(i=0;i<7;i++)             //右移7次 
		{	delay(500);	           //延迟100 5m=0.5s 
			LED=(LED>>1)|0x80;	  //右移1位,并设定最高位元为1
		 }				       //结束右移,只有最右1灯亮 
	}					       // while循环结束 
}						       //主程序结束 
//===========================延时1ms子程序============================================================
delay(int x)                              //延时函数开始
{int i,j;                                //声明整形变量i,j 
     for(i=0;i<x;i++)                      //计数x次，延迟X×1ms
     for(j=0;j<120;j++);                   //计数120次，延迟1ms
}
--------------------------------------------------------------------------------------------------------------------------------------------------