//==================================声明区=================================================================
#include	<reg51.h>  	// 定义8051寄存器的头文件
#define led P2
void delay(int);	         // 声明延迟函数 
//==================================主程序================================================================
main( )                 // 主函数开始 
{ led=0xff;                //流水灯初始状态，全熄灭
 while(1)                //无穷循环
     {led=0xfe;           //P2.0口的灯亮
      delay(500);         //延时0.5S
led=0xfd;          //P2.1口的灯亮
      delay(500);        //延时0.5S
led=0xfb;         //P2.2口的灯亮
      delay(500);        //延时0.5S
led=0xf7;         //P2.3口的灯亮
      delay(500);        //延时0.5S
led=0xef;          //P2.4口的灯亮
      delay(500);        //延时0.5S
led=0xdf;          //P2.5口的灯亮
      delay(500);        //延时0.5S
led=0xbf;         //P2.6口的灯亮
      delay(500);        //延时0.5S
led=0x7f;         //P2.6口的灯亮
      delay(500);        //延时0.5S 
      }                //while循环结束
}                      //主程序结束		
//================================延迟函数============================================================
void delay(int x)		              // 延迟函数开始,x=延迟次数 
{	int i,j;				// 声明整数变量i,j  
	for (i=0;i<x;i++)	     // 计数x次,延迟X×1ms
for (j=0;j<120;j++);	     // 计数120次 ,延迟1ms 
}					     // 延迟函数结束 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------