-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
#include <reg51.h>              //定义寄存器头文件
#define led P2                 //定义led接P2口
char code seg[ ]={0xfe,0xfd,0xfb,0xf7,0xef,0xdf,0xbf,0x7f};//流水灯循环亮灭的数据码
delay(int);                     //声明延时函数
//===========================主程序=======================================================================

main( )                       //主函数开始
{ while(1)                     //无穷循环    
    { int i;                    //声明整形变量i
     for(i=0;i<8;i++)           //循环8次
        {delay(500);          //延时0.5S
         led=seg[i];          // 取表格中码送至led
         }                  
     }                      //无穷循环结束
 }                          //主函数结束
//===========================延时1ms子程序==============================================================
delay(int x)                  //延时函数开始
{int i,j;                    //声明整形变量i,j 
     for(i=0;i<x;i++)          //计数x次，延迟X×1ms
     for(j=0;j<120;j++);       //计数120次，延迟1ms
}
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------