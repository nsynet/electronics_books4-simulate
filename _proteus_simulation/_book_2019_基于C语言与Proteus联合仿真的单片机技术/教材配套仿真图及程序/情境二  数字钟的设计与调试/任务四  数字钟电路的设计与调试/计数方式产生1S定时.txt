计数方式产生1s 定时的程序流程图如图2-4-5所示。程序如下：
---------------------------------------------------------------------------------------------------------------------------------------------------
//==========声明区=====================================================================================
#include<reg51.h>
#define led P2                   //定义LED灯接P2口     
//=========主程序======================================================================================
main()
{    TH0=256-100;             //计数器0初始值 
TL0=256-100;
TMOD=0xe0;             //选择计数器0，方式2                               
TR0=1;                  //启动计数器0
led=0x0f; 
while(1)	
   {  if(TF0==1)           //100次到，溢出标志位TF0=1
      {  TF0=0;           //清除TF0，重新开始计数
         led=~led;        //LED灯状态取反
      }  
   }
}                   