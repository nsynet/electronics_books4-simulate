//==声明区===========================================================================
#include	<reg51.h>	          //	
#define	SEG	P0			//定义七段LED数码管接至P 0
char code TAB[10]={	0xc0, 0xf9, 0xa4, 0xb0, 0x99,0x92, 0x83, 0xf8, 0x80, 0x98 };	// 数字0-9的编码
sbit  PB1=P2^7;			        //声明按钮PB1接至P2.7
sbit  PB2=P2^6;			        //声明按钮PB2接至P2.6
void debouncer(void);	             //声明去抖动函数 
//=======================主程序===========================================================================    
main( )					                // 主程序开始 
{	unsigned char i=0;	                // 声明变量i初值=0 
	PB1=PB2=1;			           //	初始化输入端口 
	SEG=TAB[i];			           //	开始显示0 
	while(1)			           //	无穷循环
	{	if (PB1==0)		                //	判断PB1是否按下 
		{	debouncer( );               //	调用去抖动函数 
			i= (i<9)? i+1:0;              //	若i<9则i=i+1，若i>=9清除为0
			SEG=TAB[i];	            //	输出数字至七段LED数码管 
			while(PB1==0);	            // PB1是否按住？ 
			debouncer();	            //	调用去抖动函数 
		}				            // i f叙述结束 
		if (PB2==0)		                //	判断PB2是否按下	 
		{	debouncer();               //	调用去抖动函数 
			i= (i>0)? i-1:9;              //	若i>0则i=i-1，i<=0重设为9
			SEG=TAB[i];	           //	输出数字至七段显示器 
			while(PB2==0);	            //PB1是否按住？ 
			debouncer();	           //调用去抖动函数 
		}				            //if叙述结束 
	}					            //while循环结束   
}						            //主程序结束 
//============================子程序：去抖动函数 ,延迟约20ms =========================================
void debouncer(void)             	
{	int i;				           //声明整数变量i 
	for(i=0;i<2400;i++);	                //计数2400次,延迟约20ms 
}						
-----------------------------------------------------------------------------------------------------------------------------------------------------