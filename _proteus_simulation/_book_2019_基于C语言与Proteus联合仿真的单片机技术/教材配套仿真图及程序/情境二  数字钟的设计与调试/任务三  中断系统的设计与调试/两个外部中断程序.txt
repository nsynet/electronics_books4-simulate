#include<reg51.h>           //定义寄存器的头文件
#define led0 P0             //定义主程序的灯led0接P0
#define led1 P1             //定义外部中断0子程序的灯led1接P1
#define led2 P2             //定义外部中断1子程序的灯led2接P2
delay(int);                 //声明延迟函数
char code tab1[ ]={0x7f,0x3f,0x1f,0x0f,0x07,0x03,0x01,0x00,0xff};   //主程序的灯饰效果
char code tab2[ ]={0x3f,0x0f,0x03,0x00,0xff};                    //外部中断0程序的灯饰效果
char code tab3[ ]={0x0f,0xf0,0x0f,0xf0,0xff};                     //外部中断1程序的灯饰效果
//=========主程序==================================================================
main( )
{
int k;
EA=1;         //中断总开关
EX0=1;        //外部中断0开关
IT0=1;        //外中断0设为负边沿触发
EX1=1;		//外部中断1开关
IT1=1;		//外中断1设为负边沿触发
	while(1)
	{
	 	for(k=0;k<9;k++)
		{ led0=tab1[k];          
		  delay(500);
		 }
	}
}
//=====================外部中断0子程序================================================
void zhongduan0(void) interrupt 0
{ int m;
	for(m=0;m<5;m++)
	{ led1=tab2[m];
	  delay(500);
	}
}
//=====================外部中断1子程序==================================================
void zhongduan1(void) interrupt 2
{ int n;
	for(n=0;n<5;n++)
	{ led2=tab3[n];
	  delay(500);
	}
}

//==========延迟函数====================================================================   
delay(int x)
{ int i,j;
for(i=0;i<x;i++)
for(j=0;j<120;j++);
}