//-----------------------------------------------------------------
//  名称: ULN2003驱动5路继电器及74HC595控制电梯数字点阵屏滚动显示
//-----------------------------------------------------------------
//  说明: 本例模拟了电梯显示屏上下滚动显示楼层的效果,当目标楼层大于
//   	  当前楼层时将向上滚动显示,反之则向下滚动显示.目标楼层到达时
//	      点阵保持稳定显示,且对应继电器接通.
//
//-----------------------------------------------------------------
#include <TimerOne.h>
//75HC595引脚定义
#define SH_CP	6	//移位时钟脉冲
#define DS		7	//串行数据输入
#define ST_CP	8	//输出锁存器控制脉冲
//待显示图形的点阵
//数字0~9的点阵字节(每个数字8字节)
const uint8_t Dots_Matrix[]= {
	0x00,0x3C,0x66,0x42,0x42,0x66,0x3C,0x00,	//0
	0x00,0x08,0x38,0x08,0x08,0x08,0x3E,0x00,	//1
	0x00,0x3C,0x42,0x04,0x08,0x32,0x7E,0x00,	//2
	0x00,0x3C,0x42,0x1C,0x02,0x42,0x3C,0x00,	//3
	0x00,0x0C,0x14,0x24,0x44,0x3C,0x0C,0x00,	//4
	0x00,0x7E,0x40,0x7C,0x02,0x42,0x3C,0x00,	//5
	0x00,0x3C,0x40,0x7C,0x42,0x42,0x3C,0x00,	//6
	0x00,0x7E,0x44,0x08,0x10,0x10,0x10,0x00,	//7
	0x00,0x3C,0x42,0x24,0x5C,0x42,0x3C,0x00,	//8
	0x00,0x38,0x46,0x42,0x3E,0x06,0x3C,0x00 	//9
};
int Current_Level = 1;			//当前楼层号
int Dest_Level = 1;				//目标楼层号
int offset = 0;					//用于产生滚动效果的取点阵字节偏移变量
int r = 0, x = 0;				//点阵显示取字节索引及刷新遍数控制变量
uint8_t RelayPins[] = {0xFF,13,12,11,10,9};//继电器控制引脚(13-9对应1-5层)
//-----------------------------------------------------------------
// 初始配置
//-----------------------------------------------------------------
void setup() {

}
//-----------------------------------------------------------------
// 主循环
//-----------------------------------------------------------------
void loop() {
}
//-----------------------------------------------------------------
// TIIMER1定时器控制点阵屏显示,同时处理按键操作
//-----------------------------------------------------------------
void Refresh_Matrix_LED() {


}
//-----------------------------------------------------------------
// 1字节数据串行输入595子程序
//-----------------------------------------------------------------
void Serial_Input_595(uint8_t d) {

}
//-----------------------------------------------------------------
// 595并行输出子程序
//-----------------------------------------------------------------
void Parallel_Output_595() {

}