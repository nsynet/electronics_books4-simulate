//-----------------------------------------------------------------
// 名称：SPI接口程序文件
//-----------------------------------------------------------------
#include "spi.h"

#define delay_us(x)  DelayUS(x)
#define delay_ms(x)  DelayMS(x)
#define delay_sec(x) DelayMS(x*1000)

//-----------------------------------------------------------------
// 通过SPI接口写1字节
//-----------------------------------------------------------------
void WriteByte(u8 t) {
	idata u8 i;
	for(i = 0; i < 8; i++) {
		SCK = 0;
		SI = t & 0x80;
		SCK = 1;
		t <<=1;
	}
	SCK = 0;
}
//-----------------------------------------------------------------
// 通过SPI接口读1字节
//-----------------------------------------------------------------
u8 ReadByte() {
	idata u8 i,d = 0x00;
	SCK = 0;
	for(i = 0;i < 8; i++) {
		SCK = 1;
		d = d<<1; d |= SO;
		SCK = 0;
	}
	return d;
}