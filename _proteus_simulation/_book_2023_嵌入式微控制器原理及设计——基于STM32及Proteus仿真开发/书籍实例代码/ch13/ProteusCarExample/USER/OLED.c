
#include "OLED.h"

void delay(uchar i)
{
	uchar j=100,k;
	for(k=0;k<i;k++)
	{
		while(j--);
	}
}


uchar  BMP[]=
{
	
/*--  文字:  测  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x08,0x31,0x86,0x60,0x00,0xFE,0x02,0xF2,0x02,0xFE,0x00,0xF8,0x00,0x00,0xFF,0x00,
0x04,0xFC,0x03,0x00,0x80,0x47,0x30,0x0F,0x10,0x67,0x00,0x07,0x40,0x80,0x7F,0x00,
///////////////////////////////////////////////////////////////////////////////

/*--  文字:  试  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x40,0x42,0xDC,0x08,0x00,0x90,0x90,0x90,0x90,0x90,0xFF,0x10,0x12,0x1C,0x10,0x00,
0x00,0x00,0x7F,0x20,0x10,0x20,0x20,0x1F,0x10,0x10,0x01,0x06,0x18,0x20,0x78,0x00,
	
/*--  文字:  温  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x10,0x60,0x02,0x8C,0x00,0x00,0xFE,0x92,0x92,0x92,0x92,0x92,0xFE,0x00,0x00,0x00,
0x04,0x04,0x7E,0x01,0x40,0x7E,0x42,0x42,0x7E,0x42,0x7E,0x42,0x42,0x7E,0x40,0x00,
////////////////////////////////////////////////////////////////////////////////
	
/*--  文字:  度  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0xFC,0x24,0x24,0x24,0xFC,0x25,0x26,0x24,0xFC,0x24,0x24,0x24,0x04,0x00,
0x40,0x30,0x8F,0x80,0x84,0x4C,0x55,0x25,0x25,0x25,0x55,0x4C,0x80,0x80,0x80,0x00,
////////////////////////////////////////////////////////////////////////////////

/*--  文字:  速  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x40,0x40,0x42,0xCC,0x00,0x04,0xF4,0x94,0x94,0xFF,0x94,0x94,0xF4,0x04,0x00,0x00,
0x00,0x40,0x20,0x1F,0x20,0x48,0x44,0x42,0x41,0x5F,0x41,0x42,0x44,0x48,0x40,0x00,
////////////////////////////////////////////////////////////////////////////////


/*--  文字:  距  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x3E,0x22,0xE2,0x22,0x3E,0x00,0xFE,0x22,0x22,0x22,0x22,0x22,0xE2,0x02,0x00,
0x20,0x3F,0x20,0x1F,0x11,0x11,0x00,0x7F,0x44,0x44,0x44,0x44,0x44,0x47,0x40,0x00,
////////////////////////////////////////////////////////////////////////////////

/*--  文字:  离  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x04,0x04,0x04,0xF4,0x84,0xD4,0xA5,0xA6,0xA4,0xD4,0x84,0xF4,0x04,0x04,0x04,0x00,
0x00,0xFE,0x02,0x02,0x12,0x3A,0x16,0x13,0x12,0x1A,0x32,0x42,0x82,0x7E,0x00,0x00,
//////////////////////////////////////////////////////////////////////////////////

/*--  文字:  0  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///////////////////////////////////////////////////////////////////////////////

/*--  文字:  1  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///////////////////////////////////////////////////////////////////////////////

/*--  文字:  2  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///////////////////////////////////////////////////////////////////////////////



/*--  文字:  3  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///////////////////////////////////////////////////////////////////////////////

/*--  文字:  4  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///////////////////////////////////////////////////////////////////////////////

/*--  文字:  5  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///////////////////////////////////////////////////////////////////////////////

/*--  文字:  6  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///////////////////////////////////////////////////////////////////////////////

/*--  文字:  7  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  8  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  9  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};




/**************************************************************
LCD写函数
void LCD_write(数据或者命令，A0选择)
****************************************************************/
void LCD_write(uchar data_command,uchar dc) 
{//参数dc=0时表示发命令，dc=1时表示发送数据
  uchar i;
  LCD_A0=dc; 
  for(i=0;i<8;i++)
  {
    LCD_SCL=0;
    LCD_SI=(data_command&0x80)==0?0:1;
    data_command<<=1;
    LCD_SCL=1;
  }
}

/**************************************************************
LCD初始化函数
****************************************************************/
void LCD_Init(void) 
{
	uchar i;
	GPIO_InitTypeDef GPIO_InitStructure;
  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);  
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6|GPIO_Pin_7|GPIO_Pin_8 ;
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;       
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;      //
  GPIO_Init(GPIOB, &GPIO_InitStructure);
  for(i=100;i>0;i--);
  for(i=100;i>0;i--);
  LCD_write(0xa2,0);//LCD偏压设置：1/9 BIAS
  LCD_write(0xa1,0);//列地址选择为从右到左对应0~127;0xa1:列地址从左到右；0xa0:列地址从右到左
  LCD_write(0xc0,0);//行地址从上到下为0~63;0xc0:行地址从上到下；0xc8:行地址从下到上
  LCD_write(0x26,0);//V5电压内部电阻调整设置
  LCD_write(0x81,0);//亮度调整命令0~63(暗到亮)
  LCD_write(0x10,0);//亮度调节为双字节命令,前一个参数控制字的深浅
  LCD_write(0x2f,0);//上电控制，打开调压器、稳压器和电压跟随
  LCD_write(0xaf,0);//set display off。0xaf:set display on
  LCD_write(0x60,0);//其实行设置
}

///清屏
void clrscr(uchar page_f, //显示一个字或多个字函数
    uchar page_sum,uchar column_f,uchar column_sum )//x*8
{                                                   //参数：指向字首地址，起始页，占多少页，起始列，占多少列
  uchar i,j,page=0xb0;//指向首页命令
  for(i=page_f;i<page_sum+page_f;i++)
  { 
		 LCD_write(page+i,0); 
     LCD_write(0x10|((0xf0&column_f)>>4),0);//设定列地址高4位为0
     LCD_write(0x04|(0x0f&column_f),0);//设定列地址低4位为0
     for(j=0;j<column_sum;j++)
     {
       LCD_write(0x00,1);
     }
   }
}  

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
void Draw_word(uint d_where,uchar page_f,           //显示一个字或多个字函数
    uchar page_sum,uchar column_f,uchar column_sum )//x*8
{                                                   //参数：指向字首地址，起始页，占多少页，起始列，占多少列
	                                                  //参数：指向字首地址（字组中的哪个字),起始页（ ），占多少页，起始列(从哪列填点阵列)，占多少列
  uchar i,j,page=0xb0;//指向首页命令
  d_where=d_where*32;///每个字有32个字符表示点阵
  for(i=page_f;i<page_sum+page_f;i++)
  { 
		 LCD_write(page+i,0); 
     LCD_write(0x10|((0xf0&column_f)>>4),0);//设定列地址高4位为0
     LCD_write(0x04|(0x0f&column_f),0);//设定列地址低4位为0
     for(j=0;j<column_sum;j++)
     {
        LCD_write(BMP[d_where],1);
        d_where++;
     }
  }
}

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
void Draw_word_provider(uint d_where,uchar page_f, //显示一个字或多个字函数
    uchar page_sum,uchar column_f,uchar column_sum,uchar * k )//x*8
{//参数：指向字首地址，起始页，占多少页，起始列，占多少列
  uchar i,j,page=0xb0;//指向首页命令
  d_where=d_where*32;
  for(i=page_f;i<page_sum+page_f;i++)
  { 
		 LCD_write(page+i,0); 
     LCD_write(0x10|((0xf0&column_f)>>4),0);//设定列地址高4位为0
     LCD_write(0x04|(0x0f&column_f),0);//设定列地址低4位为0
     for(j=0;j<column_sum;j++)
     {
        LCD_write(*k,1);
        k++;
     }
  }
}

/******************* (C)***Program End************文件结束*****************************************/
